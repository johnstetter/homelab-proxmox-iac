# Development Environment Configuration
# Terraform Backend Configuration
backend_bucket_name     = "k8s-infra-terraform-state"
backend_key            = "k8s-infra/dev/terraform.tfstate"
backend_region         = "us-east-1"
backend_dynamodb_table = "k8s-infra-terraform-locks"
backend_encrypt        = true

# Proxmox Provider Configuration
proxmox_api_url          = "https://your-proxmox-server:8006/api2/json"
proxmox_username         = "terraform@pve"
proxmox_password         = "your-password-here"
proxmox_api_token_id     = ""  # Leave empty to use username/password
proxmox_api_token_secret = ""  # Leave empty to use username/password
proxmox_tls_insecure     = true
proxmox_parallel         = 2
proxmox_timeout          = 300
proxmox_debug            = false

# Cluster Configuration
cluster_name = "k8s-dev"
environment  = "dev"

# Proxmox Infrastructure
proxmox_node = "pve"
vm_template  = "nixos-base-template"  # Single base NixOS template for all node types
disk_storage = "local-lvm"

# Control Plane Configuration - Minimal for dev
control_plane_count      = 1
control_plane_cores      = 2
control_plane_memory     = 2048  # 2GB for dev
control_plane_disk_size  = "30G"  # Smaller disk for dev
control_plane_ip_base    = "192.168.1.10"

# Worker Node Configuration - Minimal for dev
worker_node_count      = 2
worker_node_cores      = 2
worker_node_memory     = 4096  # 4GB for dev
worker_node_disk_size  = "50G"  # Smaller disk for dev
worker_node_ip_base    = "192.168.1.20"

# Load Balancer Configuration - Disabled for dev
enable_load_balancer      = false
load_balancer_cores       = 1
load_balancer_memory      = 1024
load_balancer_disk_size   = "10G"
load_balancer_ip          = "192.168.1.100"

# Network Configuration
network_bridge  = "vmbr0"
network_vlan    = null
network_cidr    = "24"
network_gateway = "192.168.1.1"
nameserver      = "8.8.8.8"

# SSH Configuration
ssh_user = "nixos"  # Default user for NixOS

# Kubernetes Configuration
kubernetes_api_port = 6443
kubernetes_version  = "1.28.0"
pod_subnet         = "10.244.0.0/16"
service_subnet     = "10.96.0.0/12"

# Development Environment IP allocation:
# Control Plane: 192.168.1.101 (single node)
# Worker nodes: 192.168.1.201, 192.168.1.202
# Load Balancer: Disabled for dev